# NodeCodeSync (NCS)

## Code-Driven Visual Projection

> ãƒãƒ¼ãƒ‰ã‚’æœ¬ä½“ã«ã—ãªã„ã€‚  
> ã‚³ãƒ¼ãƒ‰ã‚’çœŸå®Ÿã«ã™ã‚‹ã€‚

---

## ç¾å ´ã§èµ·ãã¦ã„ã‚‹ã“ã¨ï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ Ã— ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ï¼‰

ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆBP/BT ãªã©ï¼‰ã¯å¼·åŠ›ã§ã™ãŒã€  
å®Ÿé‹ç”¨ã§ã¯å½¹å‰²ã®å¢ƒç•ŒãŒæ›–æ˜§ã«ãªã‚Šã‚„ã™ãã€åˆ¶ä½œä½“åˆ¶ã«æ­ªã¿ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚

### ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼å´ã®ç—›ã¿
- æ•°å€¤èª¿æ•´ã‚„æŒ™å‹•ç¢ºèªã«æ™‚é–“ã‚’å–ã‚‰ã‚Œã‚‹
- è¨­è¨ˆãƒ»æŠ½è±¡åŒ–ãƒ»æœ€é©åŒ–ãƒ»ãƒ†ã‚¹ãƒˆã«é›†ä¸­ã§ããªã„
- IDEã®è§£æãƒ»ãƒ‡ãƒãƒƒã‚°èƒ½åŠ›ãŒååˆ†ã«æ´»ã‹ã›ãªã„

### ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼å´ã®ç—›ã¿
- æ©Ÿèƒ½ä¸è¶³ã«ã‚ˆã‚Šå®Ÿè£…å´ã¸å¯„ã‚‰ã–ã‚‹ã‚’å¾—ãªã„
- å·®åˆ†ãŒè¦‹ãˆã¥ã‚‰ãã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¥ã‚‰ã„
- å¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒä¸é€æ˜ã§èª¿æ•´ãŒæ€–ã„

çµæœã¨ã—ã¦ã€

- Gitå·®åˆ†ãŒå–ã‚Œãªã„
- PRãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé›£ã—ã„
- CIã‚„è‡ªå‹•ãƒ†ã‚¹ãƒˆã«ä¹—ã‚Šã«ãã„
- ã‚¢ã‚»ãƒƒãƒˆç ´æãƒªã‚¹ã‚¯ãŒã‚ã‚‹

ã¨ã„ã£ãŸæ§‹é€ çš„å•é¡ŒãŒåˆ¶ä½œé€Ÿåº¦ã‚’éˆã‚‰ã›ã¾ã™ã€‚

---

## NCSãŒä½œã‚‹æœªæ¥

NCSã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’ **Single Source of Truth** ã¨ã—ã¦æ‰±ã†ã“ã¨ã§  
å°‚é–€åˆ†é›¢ãŒè‡ªç„¶ã«æˆç«‹ã™ã‚‹åˆ¶ä½œä½“åˆ¶ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¯ã‚³ãƒ¼ãƒ‰ã«é›†ä¸­ã§ãã‚‹
è¨­è¨ˆãƒ»æŠ½è±¡åŒ–ãƒ»æœ€é©åŒ–ãƒ»ãƒ†ã‚¹ãƒˆã«å°‚å¿µã§ãã‚‹ã€‚  
IDEã®è§£æãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°èƒ½åŠ›ã‚’ãã®ã¾ã¾ä½¿ãˆã‚‹ã€‚

### ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã¯é¢ç™½ã•ã«é›†ä¸­ã§ãã‚‹
æŒ™å‹•èª¿æ•´ãƒ»æ§‹é€ è©¦è¡ŒéŒ¯èª¤ãƒ»ãƒãƒ©ãƒ³ã‚¹è¨­è¨ˆã«å°‚å¿µã§ãã‚‹ã€‚  
ãƒãƒ¼ãƒ‰ç·¨é›†ã¯UIã§ã‚ã‚Šã€æˆæœç‰©ã¯å¸¸ã«ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦æ®‹ã‚‹ã€‚

åˆ¶ä½œã«ãŠã‘ã‚‹ã€Œç¿»è¨³ã‚³ã‚¹ãƒˆã€ã‚’ã‚¼ãƒ­ã«ã™ã‚‹ã€‚

---

## Core Architecture

- **Model** : C# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆSingle Source of Truthï¼‰
- **Projection** : Unity ãƒãƒ¼ãƒ‰ã‚°ãƒ©ãƒ• UI
- **Transformer** : Roslyn åŒæ–¹å‘å¤‰æ›ãƒ¬ã‚¤ãƒ¤

ãƒãƒ¼ãƒ‰ã¯æŠ•å½±ã€‚  
ã‚³ãƒ¼ãƒ‰ãŒçœŸå®Ÿã€‚

---

## Projectional Editing ã§ã¯ãªã„

æ—¢å­˜ã® Projectional Editor ã¯ AST ã‚’ç›´æ¥æ“ä½œã—ã¾ã™ã€‚  
ãƒ†ã‚­ã‚¹ãƒˆã¯å‰¯ç”£ç‰©ã§ã™ã€‚

NCSã¯ç•°ãªã‚‹ç«‹å ´ã‚’å–ã‚Šã¾ã™ã€‚

- Roslyn ã‚’ä¸­æ ¸ã«æ®ãˆ
- C# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç¬¬ä¸€ç´šå¸‚æ°‘ã¨ã—ã¦æ‰±ã„
- ãƒãƒ¼ãƒ‰ã¨ã‚³ãƒ¼ãƒ‰ã‚’åŒæ–¹å‘åŒæœŸã•ã›ã‚‹

---

## Parser-Backed Bidirectional Code â†” Node Sync

| | Projectional Editing | NCS |
|---|----------------------|-----|
| çœŸå®Ÿã®æ‰€åœ¨ | AST | C# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ |
| ãƒ‘ãƒ¼ã‚µãƒ¼ | ä¸è¦ | Roslyn |
| ç·¨é›†æ–¹å‘ | AST â†’ ç”»é¢ | Code â†” Node |
| æ°¸ç¶šåŒ– | ç‹¬è‡ªå½¢å¼ | `.cs`ï¼ˆGitç®¡ç†å¯èƒ½ï¼‰ |

> `.cs` ãƒ•ã‚¡ã‚¤ãƒ«ãŒç¬¬ä¸€ç´šå¸‚æ°‘ã§ã‚ã‚Šç¶šã‘ã‚‹ã€‚

---

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Roslyn ParseText()    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  C# Source  â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  Node Graph  â”‚
â”‚  (.cs file) â”‚                           â”‚  (GraphView) â”‚
â”‚             â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     Roslyn AST â†’ NodeMeta â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Roslyn AST  â”‚
                    â”‚  (å®Ÿä½“)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Schema-Driven Design

Roslyn ã®å…¨æ§‹æ–‡ãƒãƒ¼ãƒ‰å®šç¾©ã‚’ XML ã‚¹ã‚­ãƒ¼ãƒã¨ã—ã¦ä¿æŒã€‚

- **NodeMeta**
- **FieldUnit**
- **FieldMetadata**

ã‚¹ã‚­ãƒ¼ãƒå·®ã—æ›¿ãˆã§å¤šè¨€èªå¯¾å¿œå¯èƒ½ã€‚

---

## Design Principles

- Model ã¯æ±šã•ãªã„
- è¦ªå­é–¢ä¿‚ã¯ Edge ãŒå”¯ä¸€ã®æƒ…å ±æº
- ä¸­é–“ãƒ„ãƒªãƒ¼ã‚’æŒãŸãªã„
- ã‚³ãƒ¼ãƒ‰ãŒå¸¸ã«çœŸå®Ÿ
- ãƒãƒ¼ãƒ‰ã¯ã‚³ãƒ¼ãƒ‰ã®æŠ•å½±

---

## Tech Stack

- Unity 2022.3+ / Unity 6
- Unity UI Toolkit
- Unity GraphView
- Microsoft Roslyn Syntax API
- UPM Package

---

## Status

ğŸš§ Early Development  
MIT License